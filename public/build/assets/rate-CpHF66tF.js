import{r,j as t,L as u,b as o}from"./app-CaMeP3M8.js";import{S as x}from"./bookepinglayout-BK5mC3bF.js";import{A as g}from"./app-layout-VG2RKsF-.js";/* empty css            */import{B as f,D as y}from"./DataGrid-DBRDN6-O.js";import"./heading-Dnm1c98N.js";import"./index-Sx6bqdWw.js";import"./app-logo-icon-DBycB7GJ.js";import"./index-C7M6TDP0.js";const w=[{title:"Курс валюты",href:"/rate"}];function S(){const[s,n]=r.useState([]),[i,c]=r.useState({}),a=async()=>{try{const e=await o.get("/exchange_rates/latest");n(e.data)}catch(e){console.error("Ошибка загрузки курсов:",e)}},d=async()=>{try{await o.get("/exchange_rates/update"),alert("Курсы валют успешно обновлены!"),a()}catch(e){console.error("Ошибка обновления курсов:",e),alert("Не удалось обновить курсы валют.")}},l=async(e,m)=>{try{return await o.put(`/exchange_rates/${e.id}`,e),a(),alert("Курс успешно обновлён!"),e}catch(p){return console.error("Ошибка сохранения курса:",p),alert("Не удалось сохранить изменения."),m}};r.useEffect(()=>{a()},[]);const h=[{field:"currency_code",headerName:"Код валюты",width:150},{field:"rate",headerName:"Курс",type:"number",width:150,editable:!0},{field:"markup_percentage",headerName:"Наценка (%)",type:"number",width:150,editable:!0},{field:"final_rate",headerName:"Итоговый курс",type:"number",width:150},{field:"date",headerName:"Дата",width:150}];return t.jsxs(g,{breadcrumbs:w,children:[t.jsx(u,{title:"Управление курсом валют"}),t.jsx(x,{children:t.jsxs("div",{style:{padding:"20px"},children:[t.jsx("h2",{children:"Управление курсами валют"}),t.jsx(f,{variant:"contained",color:"primary",onClick:d,style:{marginBottom:"20px"},children:"Получить курс nationalbank.kz"}),t.jsx("div",{className:"dataGrid-container",style:{height:400},children:t.jsx(y,{rows:s,columns:h,editMode:"row",rowModesModel:i,onRowModesModelChange:e=>c(e),processRowUpdate:l,getRowId:e=>e.id})})]})})]})}export{S as default};
